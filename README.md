# hse-os-hw3
---
# ИДЗ №3 по предмету "Операционнные системы"

# Курс 2, ПИ, ФКН, НИУ ВШЭ

# Вариант 14, Рахимова Камила Мухаммадовна, БПИ214

---

## *Условие задачи:*

Задача о гостинице – 3 (дамы и джентльмены). В гостинице 10 номеров рассчитаны на одного человека и 15 номеров рассчитаны на двух человек. В гостиницу случайно приходят клиенты–дамы и клиенты–джентльмены, и конечно они могут провести ночь в номере только с представителем своего пола. Если для клиента не находится подходящего номера, он уходит искать ночлег в другое место. Клиенты порождаются динамически и уничтожаются при освобождении номера или уходе из гостиницы при невозможности поселиться. Создать приложение, моделирующее работу гостиницы.

Гостиница — сервер. Каждого гостя реализовать в виде отдельного клиента, порождаемого вручную. Можно запустить скрипт, порождающий сразу множество гостей в фоновом режиме.

---

## *Сценарий решаемой задачи:*

Собственно сценарий уже описан в условии. Гостиница является сервером, а клиенты -- клиентами. Так как условие может быть интерпретировано на собственное усмотрение, для упрощения я решила работать только с 2 клиентами, создаваемыми вручную. Будем считать, что из-за ковидных ограничений больше клиентов принимать нельзя :)

---

## *Примечания:*

✔️ Программа с момента запуска и до завершения работы моделирует одну ночь работы отеля. Соответственно клиенты уничтожаются с рассветом (по окончании работы программы).

✔️ В данном варианте нет необходимости в наборе тестовых файлов для понимания работы программы. Результатом моделирования работы гостиницы является описание результатов действий сервера, выводимое программой.

---

## *Отчёт*

Работа выполнена с расчётом на получение оценки в 10/10 баллов.

### ◉ Требования на 4-5 баллов:

Сама программа расположилась [здесь](https://github.com/kamilarakhimova/hse-os-hw3/tree/main/4%20балла/main.c).

✔ Выбранная схема решения:

Множество процессов взаимодействуют с использованием именованных POSIX семафоров. Обмен данными ведется через разделяемую память в стандарте POSIX.

✔ Предусмотрено корректное завершение программы по прерыванию с клавиатуры по соответствующему сигналу (SIGINT или SIGTERM):

```
void sigfunc(int sig) {
    if (sig != SIGINT && sig != SIGTERM) {
        return;
    }
    printf("Пожарная эвакуация!! Всё, всё, пока!\n");
    if(sem_close(semaphore) == -1) {
        perror("can't close semaphore(");
        exit(-1);
    };
    sem_unlink(SEM_NAME);
    sem_unlink(SHM_NAME1);
    sem_unlink(SHM_NAME2);
    exit (10);
}
```

✔ Предусмотрено удаление семафоров и разделяемой памяти по ее завершению любым из способов:

```
sem_unlink(SEM_NAME);
sem_unlink(SHM_NAME1);
sem_unlink(SHM_NAME2);
```

✔ Запускаем программу:

```
~/os-mini-hw1$ gcc -pthread main.c -o main
~/os-mini-hw1$ ./main 50
```

✔ Результат выполнения программы можно увидеть [тут](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/4%20балла/result).

### ◉ Требования на 5 баллов:

Требования, совпадающие с требованиями на более низкую оценку, остались выполненными и в [этой](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/5%20баллов/main.c) программе.

✔ Выбранная схема решения:

Множество процессов взаимодействуют с использованием неименованных POSIX семафоров расположенных в разделяемой памяти. Обмен данными также ведется через разделяемую память в стандарте POSIX.

✔ Запускаем программу:

```
~/os-mini-hw1$ gcc -pthread main.c -o main
~/os-mini-hw1$ ./main 50
```

✔ Результат работы программы можно увидеть [тут](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/5%20баллов/result).

### ◉ Требования на 6 баллов:

Требования, совпадающие с требованиями на более низкую оценку, остались выполненными и в [этой](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/6%20баллов/main.c) программе.

✔ Выбранная схема решения:

Множество процессов взаимодействуют с использованием семафоров в стандарте UNIX SYSTEM V. Обмен данными ведется через разделяемую память в стандарте UNIX SYSTEM V.

✔ Запускаем программу:

```
~/os-mini-hw1$ gcc -pthread main.c -o main
~/os-mini-hw1$ ./main 50
```

✔ Результат работы программы можно увидеть [тут](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/6%20баллов/result).

### ◉ Требования на 7 баллов:

Требования, совпадающие с требованиями на более низкую оценку, остались выполненными и в [этих](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/7%20баллов/program1.c) [программах](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/7%20баллов/program2.c).

✔ Выбранная схема решения:

Множество независимых процессов взаимодействуют с использованием именованных POSIX семафоров. Обмен данными ведется через разделяемую память в стандарте POSIX.

✔ Запускаем программу:

```
~/os-mini-hw1$ gcc -pthread program1.c -o program1
~/os-mini-hw1$ gcc -pthread program2.c -o program2
~/os-mini-hw1$ ./program1 50 & ./program2
```

✔ Результат работы программы можно увидеть [тут](https://github.com/kamilarakhimova/hse-os-hw2/tree/main/7%20баллов/result).
